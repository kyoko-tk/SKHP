# Руководство программиста

## Введение

Это руководство предназначено для разработчиков, работающих с приложением "Учет Сырья и Продукции". Приложение реализовано на языке C# с использованием .NET Framework 4.7.2 и предназначено для управления базой данных SQLite.

## Структура проекта

Основные компоненты проекта:

- **Program.cs**: Точка входа в приложение.
- **LoginForm.cs**: Форма авторизации и регистрации пользователей.
- **MainForm.cs**: Главная форма приложения, предоставляет доступ к таблицам базы данных и функциям в зависимости от прав пользователя.
- **UserManagementForm.cs**: Форма для управления пользователями (добавление и удаление), доступна только администраторам.
- **Permissions**: Классы для управления правами доступа пользователей и хранения настроек в файле `permissions.json`.
- **Logger**: Класс для логирования событий и ошибок приложения.

## Классы и их функции

### LoginForm

- **Авторизация пользователей**: Проверяет введенные данные и предоставляет доступ к системе.
- **Хеширование паролей**: Использует SHA256 для безопасного хранения паролей.

### MainForm

- **Загрузка таблиц**: Загружает и отображает таблицы из базы данных, разделяя их по категориям.
- **Разграничение прав доступа**: Применяет настройки видимости таблиц и функций в соответствии с правами пользователя.
- **Логирование**: Использует класс `Logger` для записи действий и ошибок.

### UserManagementForm

- **Добавление пользователей**: Позволяет администраторам добавлять новых пользователей, включая их данные и роль.
- **Удаление пользователей**: Позволяет удалять существующих пользователей из системы.
- **Обработка данных**: Работает с временной базой данных для обеспечения целостности.

### Permissions

- **Управление правами доступа**: Сохраняет и загружает настройки прав доступа из файла `permissions.json`.
- **Настройка видимости**: Позволяет скрывать таблицы и ограничивать доступ к функциям для отдельных пользователей.

## Работа с базой данных

- **SQLite**: Используется база данных `DB.db`. Для доступа применяется `System.Data.SQLite`.
- **Временная база данных**: В критических операциях используется копия базы `temp.db` для обеспечения безопасности данных.

## Логирование

- **Файл логов**: Все события и ошибки записываются в `logs.txt`.
- **Класс Logger**: Предоставляет методы `Log(string message)` и `Log(string message, Exception ex)` для записи информации.

## Разграничение прав доступа

- **Файл permissions.json**: Содержит настройки доступа для пользователей.
- **Классы Permissions и UserPermissions**: Используются для управления этими настройками в программе.

## Рекомендации по разработке

- **Стиль кодирования**: Следовать существующему стилю и соглашениям проекта.
- **Документирование**: Добавлять XML комментарии к новым классам и методам.
- **Безопасность**: Обеспечивать безопасность данных при работе с базой (использование временных баз, транзакции, хеширование паролей).
- **Проверка данных**: Всегда проверять входные данные на корректность и уникальность.

## Сборка и запуск

- **Среда разработки**: Проект разработан в Visual Studio с .NET Framework 4.7.2.
- **Необходимые файлы**: Для корректной работы необходимы файлы `DB.db` и `permissions.json`.
- **Запуск приложения**: Точка входа в приложение находится в `Program.cs`, которое запускает форму `LoginForm`.

## Заключение

Данное руководство предоставляет общее представление о структуре и функционале приложения. Для более глубокого понимания рекомендуется изучить исходный код и комментарии.

